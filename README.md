# Lidar_Wuyi

激光雷达-五邑大学-中科银狐

# 实验步骤

1. 连接激光雷达

    - 将12V DC电源插到电源插座上，并将电源输出端接到LTME-02A 机体的数据引线末端的电源孔中。
    - 将RJ45网线的一端插入到PC电脑的网线接口中，另一端接到LTME-02A 机体的数据引线末端的网线接口。
    - 在已经连接了激光雷达的PC电脑的右下角网络图标处右击，点击”打开网络和共享中心“，进入网络和共享中心检查是否出现了新的本地连接。如果没有出现，请检查连接是否正确。

2. 将本机ip改为和这个ip一个网段内
    - 打开控制面板->打开网络和 Internet->打开网络和共享中心->点击本地连接->在弹出的页面点击属性->双击Internet协议版本4（tcp/ip）

   -> 将“自动获得ip” 改为 “使用下面的ip地址” -> 在ip地址段填入与192.168.10.160同样网段的ip 比如192.168.10.200； 子网掩码填入255.255.255.0->最后点击确认

3. 演示雷达原始数据

    - 打开“获取数据.exe”
    - 点击开启雷达，这样软件已经在持续不断的从雷达中获取数据了。
    - 点击”展示原始数据.exe”。软件就会将原始数据以图形化的方式展示出来。

4. 演示滤波数据

    - 在打开 4.2中”获取数据.exe”的同时，打开“展示滤波数据.exe”。该软件展示的是将原数据进行均值滤波后的数据。

5. 对比原始数据和滤波后的数据，有什么不同点。
6. 手动对原始数据进行处理

    - 关掉展示滤波数据软件和展示原始数据两个软件。 点击“获取数据.exe” 。软件中的“产生1条数据”按钮，就会分别在本地生成两个数据文件。包含原始数据的文件名是“RAW_LIDAR_DATA.json”，
      包含滤波后的数据的文件名是“FILTERED_LIDAR_DATA.json”。

    两个文件的文件格式如下：
    ``` json
    {
        "lidar_data":[

            [
                ["这一行是某一刻点云的x坐标"],
                ["这一行是某一刻点云的y坐标"]
            ]
        ],
        "key": "info_robot"
    }
    ```

    - 使用matlib对原始数据进行滤波处理。您可以选择处理附带的原始数据。您也可以选择生成某一刻的数据后，点击产生一条数据按钮，产生想要的数据。
    - 将处理过后的数据按照上述格式，填入对应位置。注：不要改变两个数据文件的文件名。
    - 确保关掉“获取数据.exe 软件”。 然后打开“文件转数据.exe”软件。然后打开展示原始数据.exe 和 展示滤波数据.exe。 你将能从两个软件界面中看到处理前后的数据变化。

# 问题问答

# 手册

1.

    - Q 为什么我已经连接上激光雷达了，还是无法显示图像？
    - A 激光雷达的初始默认IP地址是192.168.10.160；所以你需要将本机ip改为和这个ip一个网段内，才能进行通讯。

2.

    - Q 怎样将本机IP改为和192.168.10.160同一个网段内？
    - A 打开控制面板->打开网络和 Internet->打开网络和共享中心->点击本地连接->在弹出的页面点击属性->双击Internet协议版本4（tcp/ip）-> 将“自动获得ip” 改为 “使用下面的ip地址” ->
      在ip地址段填入与192.168.10.160同样网段的ip 比如192.168.10.200；子网掩码填入255.255.255.0->最后点击确认

3.

    - Q 为什么我点击 获取程序.exe 但是却没有反应？
    - A
        - （1）你没有连接上激光雷达的原因，请参考1、2 。
        - （2）你之前打开过获取程序.exe 但是却没有完全关闭这个程序；请同时按住 ctrl+shift+esc 三个按键，打开任务管理器。找到获取程序后台进程。点击右下角结束任务。

4.

    - Q 我如何看到原始数据的图像？
    - A
        - (1)打开获取程序.exe；点击连接（如果已经打开，跳过此步；不要重复打开）
        - (2)打开展示原始数据.exe

5.

    - Q 我如何看到滤波后的数据图像
    - A
        - （1）打开获取程序.exe; 点击连接（如果已经打开，跳过此步；不要重复打开）
        - （2）打开展示滤波数据.exe

6.

    - Q 我如何拿到激光雷达的原始数据
    - A
        - （1）打开获取程序； 点击连接（如果已经打开，跳过此步；不要重复打开）
        - (2) 点击 产生1条数据 按钮；就会分别在本地生成两个数据文件。包含原始数据的文件名是“RAW_LIDAR_DATA.json”，
          包含滤波后的数据的文件名是“FILTERED_LIDAR_DATA.json”。两个文件的文件格式如下：

        ```json
            {
                "lidar_data":[
    
                    [
                        ["这一行是某一刻点云的x坐标"],
                        ["这一行是某一刻点云的y坐标"]
                    ]
                ],
                "key": "info_robot"
            }
        ```

7.

    - Q 我如何拿到均值滤波后的数据？
    - A 参考6； FILTERED_LIDAR_DATA.json里面就是均值滤波后的数据

8.

    - Q 我在matlab里面处理过数据后，如何进行图形化？
    - A
        - （1）你可以选择使用matlab里面的功能，来图形化
        - （2）你不用matlab；

            - （2.1）将处理过后的数据填入“FILTERED_LIDAR_DATA.json”的对应位置中, 下面是“FILTERED_LIDAR_DATA.json”的数据结构; 如果只有一帧数据
            - （2.2）点击打开自带的 文件转数据.exe
            - （2.3）打开展示滤波数据.exe; 就可以看到处理过的数据了

``` json
            {
                "lidar_data":[

                    [
                        ["这一行填入处理过的数据的x坐标"],
                        ["这一行填入处理过的数据的x坐标"]
                    ]
                ],
                "key": "info_robot"
            }

```

        ```json
            {
                "lidar_data":[
    
                    [
                        ["如果有多帧数据这一行填入第一帧处理过的数据的x坐标"],
                        ["如果有多帧数据这一行填入第一帧处理过的数据的x坐标"]
                    ],
                    [
                        ["这一行填入第二帧处理过的数据的x坐标"],
                        ["这一行填入第二帧处理过的数据的x坐标"]
                    ],
                    [
                        ["这一行填入第三帧处理过的数据的x坐标"],
                        ["这一行填入第三帧处理过的数据的x坐标"]
                    ]
    
                    ......以此类推
    
                ],
                "key": "info_robot"
            }
        ```

9.
    - Q 我想研究文件转数据.exe的源代码， 该搭建什么环境？
    - A

      -（1）访问www.python.org下载python环境; 注意安装过程中勾选将python添加到PATH

        - （2）在cmd命令行界面，进入到文件转数据源代码文件夹下代码的位置；

      输入 pip install -r requirements.txt 安装所需的库

        - （3）安装IDE将有助于编辑代码 例如pycharm
